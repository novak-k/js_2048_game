{"version":3,"sources":["scripts/main.js"],"names":["board","currentScore","scoreSum","rows","colums","gameOn","startGame","document","querySelector","messageLose","messageWin","messageStart","messageInstruction","score","buttonSwitcher","classList","remove","add","innerHTML","getElementById","textContent","setGame","addEventListener","keyUpHandler","r","c","tile","createElement","id","toString","updateTile","append","setRandom","hasEmptyTile","some","row","cell","removeEventListener","found","Math","floor","random","num","innerText","value","e","code","slideLeft","slideRight","slideUp","slideDown","insertAdjacentHTML","filterZero","filter","slide","i","length","push","reverse","preventDefault"],"mappings":"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","file":"main.0ef931a9.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nlet board;\nlet currentScore = 0;\nlet scoreSum = 0;\nconst rows = 4;\nconst colums = 4;\nlet gameOn = false;\n\nconst startGame = document.querySelector('.start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\nconst messageInstruction = document.querySelector('.message-instruction');\n\nconst score = document.querySelector('.game-score');\n\nfunction buttonSwitcher() {\n  if (gameOn === true) {\n    startGame.classList.remove('start');\n    startGame.classList.add('restart');\n    startGame.innerHTML = 'Restart';\n\n    document.getElementById('board').innerHTML = '';\n    score.textContent = '0';\n    scoreSum = 0;\n    setGame();\n    document.addEventListener('keyup', keyUpHandler);\n  } else if (gameOn === false) {\n    startGame.classList.remove('restart');\n    startGame.classList.add('start');\n    startGame.innerHTML = 'Start';\n  }\n}\n\nstartGame.addEventListener('click', e => {\n  e.preventDefault();\n\n  setGame();\n  gameOn = true;\n  messageLose.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageStart.classList.add('hidden');\n  messageInstruction.classList.add('hidden');\n  buttonSwitcher();\n});\n\nfunction setGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < colums; c++) {\n      const tile = document.createElement('div');\n\n      tile.id = r.toString() + '-' + c.toString();\n\n      const num = board[r][c];\n\n      updateTile(tile, num);\n\n      document.getElementById('board').append(tile);\n    }\n  }\n\n  setRandom();\n  setRandom();\n}\n\nfunction hasEmptyTile() {\n  return board.some((row) => row.some((cell) => !cell));\n}\n\nfunction setRandom() {\n  if (!hasEmptyTile()) {\n    messageLose.classList.remove('hidden');\n    gameOn = false;\n    document.removeEventListener('keyup', keyUpHandler);\n\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * colums);\n\n    if (board[r][c] === 0) {\n      const random = Math.random() < 0.9 ? 2 : 4;\n\n      board[r][c] = random;\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n\n      tile.textContent = random;\n      tile.classList.add(`${random}`);\n\n      found = true;\n    }\n  }\n}\n\nfunction updateTile(tile, num) {\n  tile.innerText = '';\n  tile.classList.value = '';\n  tile.classList.add('tile');\n\n  if (num > 0) {\n    tile.innerText = num;\n\n    if (num < 2048) {\n      tile.classList.add('tile--' + num.toString());\n    }\n\n    if (num === 2048) {\n      tile.classList.add('tile--' + num.toString());\n      messageWin.classList.remove('hidden');\n      document.removeEventListener('keyup', keyUpHandler);\n    }\n  }\n}\n\nfunction keyUpHandler(e) {\n  currentScore = 0;\n\n  if (e.code === 'ArrowLeft') {\n    slideLeft();\n    setRandom();\n  } else if (e.code === 'ArrowRight') {\n    slideRight();\n    setRandom();\n  } else if (e.code === 'ArrowUp') {\n    slideUp();\n    setRandom();\n  } else if (e.code === 'ArrowDown') {\n    slideDown();\n    setRandom();\n  }\n  score.textContent = scoreSum;\n\n  score.insertAdjacentHTML('afterend', `\n    <span class=\"score-update\">+${currentScore}</span>\n  `);\n}\n\nif (document !== 'undefined') {\n  document.addEventListener('keyup', keyUpHandler);\n}\n\nfunction filterZero(row) {\n  return row.filter(num => num);\n}\n\nfunction slide(row) {\n  row = filterZero(row); // eslint-disable-line no-param-reassign\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      scoreSum += row[i];\n      currentScore += row[i];\n    }\n  }\n\n  row = filterZero(row); // eslint-disable-line no-param-reassign\n\n  while (row.length < colums) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction slideLeft() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row = slide(row);\n    board[r] = row;\n\n    for (let c = 0; c < colums; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n}\n\nfunction slideRight() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row.reverse();\n\n    row = slide(row);\n    row.reverse();\n    board[r] = row;\n\n    for (let c = 0; c < colums; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n}\n\nfunction slideUp() {\n  for (let c = 0; c < colums; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n}\n\nfunction slideDown() {\n  for (let c = 0; c < colums; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n}\n"]}